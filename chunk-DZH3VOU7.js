import{a as J,b as Q}from"./chunk-YRGJMAXA.js";import{A as y,Aa as z,B as I,Ba as W,C as P,E as M,Ea as $,F as L,G as u,H as a,I as r,J as x,N as C,O as p,P as c,W as g,Xa as j,Y as _,_ as B,aa as F,ab as R,ba as A,ca as E,cb as q,f,fb as v,ga as N,h as s,i as d,jb as H,k as V,kb as K,ma as D,p as m,qa as O,qb as T,rb as G,s as w,ua as S,w as k}from"./chunk-REBENH2H.js";import{g as b}from"./chunk-2R6CW7ES.js";var Z=e=>({bold:e});function tt(e,n){e&1&&(a(0,"ion-item",1),x(1,"ion-spinner"),r())}function et(e,n){e&1&&(a(0,"ion-item",1)(1,"ion-text"),_(2," Keine Pflanzen "),r()())}function nt(e,n){e&1&&x(0,"ion-icon",4)}function it(e,n){if(e&1){let l=C();a(0,"ion-item",3),p("click",function(){let t=s(l).$implicit,i=c(3);return d(i.goTo(t.path,t.id))}),y(1,nt,1,0,"ion-icon",4),a(2,"ion-text",5),_(3),r()()}if(e&2){let l=n.$implicit,o=n.$index,t=n.$count;u("lines",o===t-1?"none":"full"),m(),I(l.type==="collection"?1:-1),m(),u("ngClass",N(4,Z,l.type==="collection")),m(),B(" ",l.displayName," ")}}function ot(e,n){if(e&1&&M(0,it,4,6,"ion-item",2,P),e&2){let l=c(2);L(l.mergedItems)}}function lt(e,n){if(e&1&&y(0,et,3,0,"ion-item",1)(1,ot,2,0),e&2){let l=c();I(l.mergedItems.length===0?0:1)}}var Ct=(()=>{let n=class n{constructor(){this.plants=[],this.collections=[],this.isLoading=!1,this.router=f(S),this.mergedItems=[]}ngOnChanges(o){(o.plants||o.collections)&&this.mergeAndSort()}mergeAndSort(){let o=this.collections.map(i=>({id:i.id,displayName:i.name,type:"collection",path:"/collection"})),t=this.plants.map(i=>({id:i.id,displayName:i.nameLatin,type:"plant",path:"/plant"}));this.mergedItems=[...o,...t].sort((i,h)=>i.displayName.localeCompare(h.displayName))}goTo(o,t){this.router.navigate([o,t])}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w({type:n,selectors:[["app-plant-list"]],inputs:{plants:"plants",collections:"collections",isLoading:"isLoading"},features:[V],decls:3,vars:1,consts:[["slot","content",1,"plant-list"],["lines","none",1,"plant-item"],[3,"lines"],[3,"click","lines"],["name","file-tray-full-outline","slot","end"],[3,"ngClass"]],template:function(t,i){t&1&&(a(0,"div",0),y(1,tt,2,0,"ion-item",1)(2,lt,2,1),r()),t&2&&(m(),I(i.isLoading?1:2))},dependencies:[v,H,T,O,D,K],styles:[".bold[_ngcontent-%COMP%]{font-weight:700}"]});let e=n;return e})();function at(e,n){if(e&1){let l=C();a(0,"div",6)(1,"h1"),_(2,"Was m\xF6chtest du hinzuf\xFCgen?"),r(),a(3,"div",7)(4,"ion-button",8),p("click",function(){s(l),c();let t=g(3);return g(6).present(),d(t.dismiss())}),_(5," Sammlung "),r(),a(6,"ion-button",9),p("click",function(){s(l);let t=c(),i=g(3);return t.navigateToAddPlant(),d(i.dismiss())}),_(7," Pflanze "),r()()()}}function rt(e,n){if(e&1){let l=C();a(0,"ion-content",10)(1,"ion-item")(2,"ion-input",11),E("ngModelChange",function(t){s(l);let i=c();return A(i.newCollection,t)||(i.newCollection=t),d(t)}),r()(),a(3,"ion-button",12),p("click",function(){s(l);let t=c(),i=g(6);return t.addNewCollection(),d(i.dismiss())}),_(4," Hinzuf\xFCgen "),r()()}if(e&2){let l=c();m(2),F("ngModel",l.newCollection),m(),u("disabled",!l.newCollection)}}var kt=(()=>{let n=class n{constructor(){this.newCollection="",this.router=f(S),this.collectionStorageService=f(J)}ngOnInit(){}navigateToAddPlant(){this.parentCollection?this.router.navigate(["/add-plant"],{queryParams:{parentId:this.parentCollection}}):this.router.navigate(["/add-plant"])}addNewCollection(){return b(this,null,function*(){let o={name:this.newCollection,description:"",plantIds:[],collectionIds:[]};this.parentCollection||(o.initialId=Q(this.newCollection));try{let t=yield this.collectionStorageService.addCollection(o);this.parentCollection&&(yield this.collectionStorageService.addChild(this.parentCollection,t,"collection")),this.router.navigate(["/collection",t])}catch(t){console.error("Failed to add new collection:",t)}})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w({type:n,selectors:[["app-add-button"]],inputs:{parentCollection:"parentCollection"},decls:8,vars:1,consts:[["dialog",""],["collectionDialog",""],["expand","block",3,"click"],["name","add"],["id","dialog"],[3,"didDismiss","initialBreakpoint"],[1,"wrapper"],[1,"button-row"],["expand","block","color","primary",1,"ion-margin-bottom",3,"click"],["expand","block","color","primary",3,"click"],[1,"ion-padding-top"],["placeholder","Neue Sammlung eingeben",3,"ngModelChange","ngModel"],["expand","block",1,"ion-margin-top",3,"click","disabled"]],template:function(t,i){if(t&1){let h=C();a(0,"ion-button",2),p("click",function(){s(h);let X=g(3);return d(X.present())}),x(1,"ion-icon",3),r(),a(2,"ion-modal",4,0),k(4,at,8,0,"ng-template"),r(),a(5,"ion-modal",5,1),p("didDismiss",function(){return s(h),d(i.newCollection="")}),k(7,rt,5,2,"ng-template"),r()}t&2&&(m(5),u("initialBreakpoint",.3))},dependencies:[R,T,q,v,j,G,$,z,W],styles:[".button[_ngcontent-%COMP%]{height:48px}"]});let e=n;return e})();export{Ct as a,kt as b};
