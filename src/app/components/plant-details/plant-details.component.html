<div class="img-container">
  @if (imageSrc) {
    <ion-img
      [src]="imageSrc"
      class="image-preview"
      (click)="openImageModal()"
    />
  } @else {
    <ion-text color="medium">Kein Bild vorhanden</ion-text>
  }
</div>
<ion-list>
  <div class="icons-container">
    @for (light of plant.light; track $index) {
      <ion-img
        class="icon {{ light }}"
        [src]="lightIcons[light]"
      />
    }
    <ion-img
      class="icon"
      [src]="waterIcons[plant.watering]"
    />
    @for (icon of icons; track icon) {
      <ion-img
        class="icon"
        src="assets/icons/{{ icon }}"
      />
    }
  </div>

  @if (plant.type) {
    <ion-item>
      <strong>Typ:</strong>
      <ion-label slot="end">
        {{ plant.type }}
      </ion-label>
    </ion-item>
  }

  @if (plant.leafColor.length > 0) {
    <ion-item>
      <ion-label>
        <strong>Blätterfarbe:</strong>
        <div class="checkbox-container">
          @for (color of plant.leafColor; track $index) {
            <ion-checkbox
              class="color-choices"
              [style.--checkbox-background]="color"
              [style.--checkbox-background-checked]="color"
              [style.--border-color]="color"
              [style.--border-color-checked]="color"
            />
          }
        </div>
      </ion-label>
    </ion-item>
  }

  @if (plant.bloomColor.length > 0) {
    <ion-item>
      <ion-label>
        <strong>Blütefarbe:</strong>
        <div class="checkbox-container">
          @for (color of plant.bloomColor; track $index) {
            <ion-checkbox
              class="color-choices"
              [style.--checkbox-background]="color"
              [style.--checkbox-background-checked]="color"
              [style.--border-color]="color"
              [style.--border-color-checked]="color"
            />
          }
        </div>
      </ion-label>
    </ion-item>
  }

  @if (plant.fertilization.enabled) {
    <ion-item>
      <ion-label>
        <strong>Dünger:</strong>
        <div>{{ plant.fertilization.type }} – {{ plant.fertilization.time }}</div>
      </ion-label>
    </ion-item>
  }

  @if (plant.pruning.enabled) {
    <ion-item>
      <ion-label>
        <strong>Beschneidung:</strong>
        <div>{{ plant.pruning.amount }} – {{ plant.pruning.time }}</div>
      </ion-label>
    </ion-item>
  }

  @if (plant.fruit.enabled) {
    <ion-item>
      <strong>Früchte:</strong>
      <ion-label slot="end">{{ plant.fruit.time.start }} – {{ plant.fruit.time.end }}</ion-label>
    </ion-item>
  }

  <ion-item>
    <strong>Blütezeit:</strong>
    <ion-label slot="end">{{ plant.bloomTime.start }} – {{ plant.bloomTime.end }}</ion-label>
  </ion-item>

  <ion-item>
    <strong>Bedarf:</strong>
    <ion-label slot="end">
      {{ plant.requiredArea.start | commaDecimal }} – {{ plant.requiredArea.end | commaDecimal }} m²
    </ion-label>
  </ion-item>

  <ion-item>
    <strong>Abstand:</strong>
    <ion-label slot="end">
      {{ plant.distance.start | commaDecimal }} – {{ plant.distance.end | commaDecimal }} m
    </ion-label>
  </ion-item>

  <ion-item>
    <strong>Höhe:</strong>
    <ion-label slot="end">
      {{ plant.height.start | commaDecimal }} – {{ plant.height.end | commaDecimal }} m
    </ion-label>
  </ion-item>

  <ion-item>
    <strong>Breite:</strong>
    <ion-label slot="end">
      {{ plant.width.start | commaDecimal }} – {{ plant.width.end | commaDecimal }} m
    </ion-label>
  </ion-item>

  @if (plant.rootSystem) {
    <ion-item>
      <ion-label>
        <strong>Wurzelsystem:</strong>
        <div>{{ plant.rootSystem }}</div>
      </ion-label>
    </ion-item>
  }

  @if (plant.notice) {
    <ion-item lines="none">
      <ion-label class="ion-text-wrap ion-margin-vertical">
        <strong>Notizen:</strong>
        <div class="notice-content">{{ plant.notice }}</div>
      </ion-label>
    </ion-item>
  }
</ion-list>

<ion-modal
  [isOpen]="isImageModalOpen"
  (didDismiss)="isImageModalOpen = false"
>
  <ng-template>
    <div class="modal-content">
      <ion-icon
        name="close"
        class="close-icon"
        (click)="isImageModalOpen = false"
      />

      <swiper-container
        pagination="true"
        navigation="true"
        zoom="true"
        style="width: 100%; height: 100%"
      >
        <swiper-slide>
          <img
            [src]="imageSrc"
            style="width: 100%; height: 100%; object-fit: contain"
          />
        </swiper-slide>
      </swiper-container>
    </div>
  </ng-template>
</ion-modal>
