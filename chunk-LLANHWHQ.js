import{a as k,b as E}from"./chunk-DZH3VOU7.js";import{a as P}from"./chunk-YRGJMAXA.js";import{b as O}from"./chunk-W67WLBRR.js";import{Ea as v,G as i,H as a,I as l,J as r,Wa as C,Y as h,Z as u,bb as S,cb as b,db as I,f as c,hb as y,lb as M,mb as L,p as n,qa as f,s as d,sa as g}from"./chunk-REBENH2H.js";import"./chunk-Q6FFIHTR.js";import"./chunk-6LGZ257D.js";import"./chunk-4QTIMY6T.js";import"./chunk-J7JDIHQK.js";import"./chunk-SDMJJ4FY.js";import"./chunk-GIIU5PV3.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-SPMQWSIB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{g as m}from"./chunk-2R6CW7ES.js";var N=(()=>{let o=class o{constructor(){this.route=c(g),this.plantStorageService=c(O),this.collectionStorageService=c(P),this.collection=void 0,this.plants=[],this.collections=[],this.isLoading=!0}ngOnInit(){this.collectionId=Number(this.route.snapshot.paramMap.get("id"))}ionViewWillEnter(){this.fetchCollectionData(this.collectionId)}fetchCollectionData(p){return m(this,null,function*(){this.isLoading=!0;try{if(this.collection=yield this.collectionStorageService.getCollection(p),!this.collection){this.plants=[],this.collections=[];return}let[t,e]=yield Promise.all([this.plantStorageService.bulkGet(this.collection.plantIds),this.collectionStorageService.bulkGet(this.collection.collectionIds)]);this.plants=t,this.collections=e}catch(t){console.error("Failed to fetch related data:",t),this.plants=[],this.collections=[]}finally{this.isLoading=!1}})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=d({type:o,selectors:[["app-collection"]],decls:11,vars:7,consts:[[3,"translucent"],["slot","start"],["defaultHref","/home"],[3,"fullscreen"],[1,"container"],[3,"plants","collections","isLoading"],[1,"button",3,"parentCollection"]],template:function(t,e){t&1&&(a(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),r(3,"ion-back-button",2),l(),a(4,"ion-title"),h(5),l()()(),a(6,"ion-content",3)(7,"div",4)(8,"ion-list"),r(9,"app-plant-list",5),l(),r(10,"app-add-button",6),l()()),t&2&&(i("translucent",!0),n(5),u(e.collection==null?null:e.collection.name),n(),i("fullscreen",!0),n(3),i("plants",e.plants)("collections",e.collections)("isLoading",e.isLoading),n(),i("parentCollection",e.collectionId))},dependencies:[b,I,M,L,f,v,S,C,y,E,k],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 16px;height:100%}.container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{flex:1}.container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{position:sticky;bottom:var(--ion-safe-area-bottom);margin-bottom:unset}"]});let s=o;return s})();export{N as CollectionPage};
