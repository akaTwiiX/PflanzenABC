import{b as ne,c as ie,e as oe,f as ae,g as w,j as re,k as se}from"./chunk-6XFLKPQQ.js";import"./chunk-3J7GGTVR.js";import{a as ee,b as te}from"./chunk-W67WLBRR.js";import{a as L}from"./chunk-HRF4GLYN.js";import"./chunk-X3UO7MBW.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SE5MDOIR.js";import"./chunk-SOAE3S7P.js";import"./chunk-P7ON66G6.js";import"./chunk-BMJVVMK5.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-SFTBTCL6.js";import"./chunk-EXCUUSR2.js";import"./chunk-P56KROS5.js";import"./chunk-JIDLS5T7.js";import"./chunk-IYQ2KJIN.js";import"./chunk-CKP3SGE2.js";import{b as le}from"./chunk-Z577BEOS.js";import{$ as x,A as u,B as h,D as R,E as F,Ea as V,F as H,G as m,H as t,I as n,J as g,N as D,O as f,P as p,Xa as j,Y as r,Z as O,_ as C,ab as q,bb as N,cb as K,db as W,ea as z,eb as G,f as d,fb as $,gb as J,h as y,hb as Q,i as T,ia as v,ja as b,jb as X,kb as M,mb as Y,o as k,p as o,qa as E,qb as Z,s as P,sa as U,ua as A,w as B}from"./chunk-REBENH2H.js";import"./chunk-Q6FFIHTR.js";import"./chunk-5FBTKVM5.js";import"./chunk-BM4ZWEUJ.js";import"./chunk-RN6WWTXV.js";import"./chunk-6LGZ257D.js";import"./chunk-4QTIMY6T.js";import"./chunk-J7JDIHQK.js";import"./chunk-SDMJJ4FY.js";import"./chunk-GIIU5PV3.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-SPMQWSIB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{g as _}from"./chunk-2R6CW7ES.js";var S=function(e){return e.HERB="HERB",e.SHRUB="SHRUB",e.TREE="TREE",e.CLIMBER="CLIMBER",e}(S||{}),ce={[S.HERB]:"Kraut",[S.SHRUB]:"Strauch",[S.TREE]:"Baum",[S.CLIMBER]:"Kletterpflanze"};function de(e,a){if(e&1){let l=D();t(0,"ion-img",11),f("click",function(){y(l);let s=p();return T(s.openImageModal())}),n()}if(e&2){let l=p();m("src",l.imageSrc)}}function ge(e,a){e&1&&(t(0,"ion-text",5),r(1,"Kein Bild vorhanden"),n())}function ue(e,a){if(e&1&&g(0,"ion-img",7),e&2){let l=a.$implicit;m("src",z("assets/icons/",l))}}function he(e,a){if(e&1&&(t(0,"ion-item")(1,"strong"),r(2,"D\xFCnger:"),n(),t(3,"ion-label",8),r(4),n()()),e&2){let l=p();o(4),x(" ",l.plant.fertilization.type," \u2013 ",l.plant.fertilization.time," ")}}function fe(e,a){if(e&1&&(t(0,"ion-item")(1,"strong"),r(2,"Beschneidung:"),n(),t(3,"ion-label",8),r(4),n()()),e&2){let l=p();o(4),x(" ",l.plant.pruning.amount," \u2013 ",l.plant.pruning.time," ")}}function xe(e,a){if(e&1&&(t(0,"ion-item")(1,"strong"),r(2,"Fr\xFCchte:"),n(),t(3,"ion-label",8),r(4),n()()),e&2){let l=p();o(4),x(" ",l.plant.fruit.time.start," \u2013 ",l.plant.fruit.time.end," ")}}function _e(e,a){if(e&1){let l=D();t(0,"div",12)(1,"ion-icon",13),f("click",function(){y(l);let s=p();return T(s.isImageModalOpen=!1)}),n(),t(2,"swiper-container",14)(3,"swiper-slide"),g(4,"img",15),n()()()}if(e&2){let l=p();o(4),m("src",l.imageSrc,k)}}var me=(()=>{let a=class a{constructor(){this.plantFormService=d(w),this.plantTypeLabel=ce,this.lightRequirementLabel=ne,this.lightIcons=ie,this.waterRequirementLabel=oe,this.waterIcons=ae,this.icons=[],this.imageSrc=void 0,this.isImageModalOpen=!1}ngOnInit(){return _(this,null,function*(){if(this.buildIcons(),this.plant.imageUrl)if(le.getPlatform()==="web"){let c=yield ee.images.get(Number(this.plant.imageUrl));this.imageSrc=c?URL.createObjectURL(c.data):void 0}else{let c=yield re(this.plant.imageUrl);this.imageSrc=c}})}buildIcons(){let c={leaf:"leaf.png",dryTolerance:"cactus.png",buckets:"flower-pot.png",frostResistant:"snowflake.png",edible:"eatable.png",toxic:"skull.png",fragrant:"nose.png"};this.icons=Object.entries(c).filter(([s])=>this.resolvePath(this.plant,s)).map(([s,i])=>i)}resolvePath(c,s){return s.split(".").reduce((i,I)=>i&&i[I],c)}openImageModal(){this.isImageModalOpen=!0}closeImageModal(){this.isImageModalOpen=!1}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=P({type:a,selectors:[["app-plant-details"]],inputs:{plant:"plant"},decls:50,vars:25,consts:[[1,"container"],["lines","none"],[1,"ion-text-center"],[1,"img-container"],[1,"image-preview",3,"src"],["color","medium"],[1,"icons-container"],[1,"icon",3,"src"],["slot","end"],[1,"notice-container","ion-margin-vertical"],[3,"didDismiss","isOpen"],[1,"image-preview",3,"click","src"],[1,"modal-content"],["name","close",1,"close-icon",3,"click"],["pagination","true","navigation","true","zoom","true",2,"width","100%","height","100%"],[2,"width","100%","height","100%","object-fit","contain",3,"src"]],template:function(s,i){s&1&&(t(0,"ion-list",0)(1,"ion-item",1)(2,"ion-label")(3,"h1",2),r(4),n(),t(5,"p",2),r(6),n()()(),t(7,"div",3),u(8,de,1,1,"ion-img",4)(9,ge,2,0,"ion-text",5),n(),t(10,"div",6),g(11,"ion-img",7)(12,"ion-img",7),F(13,ue,1,2,"ion-img",7,R),n(),t(15,"ion-item")(16,"strong"),r(17,"Typ:"),n(),t(18,"ion-label",8),r(19),n()(),u(20,he,5,2,"ion-item"),u(21,fe,5,2,"ion-item"),u(22,xe,5,2,"ion-item"),t(23,"ion-item")(24,"strong"),r(25,"Bl\xFCtezeit:"),n(),t(26,"ion-label",8),r(27),n()(),t(28,"ion-item")(29,"strong"),r(30,"Abstand:"),n(),t(31,"ion-label",8),r(32),v(33,"commaDecimal"),v(34,"commaDecimal"),n()(),t(35,"ion-item")(36,"strong"),r(37,"H\xF6he:"),n(),t(38,"ion-label",8),r(39),v(40,"commaDecimal"),v(41,"commaDecimal"),n()(),t(42,"ion-item",1)(43,"div",9)(44,"strong"),r(45,"Notizen:"),n(),t(46,"ion-label"),r(47),n()()()(),t(48,"ion-modal",10),f("didDismiss",function(){return i.isImageModalOpen=!1}),B(49,_e,5,1,"ng-template"),n()),s&2&&(o(4),O(i.plant.nameLatin),o(2),O(i.plant.nameGerman),o(2),h(i.imageSrc?8:9),o(3),m("src",i.lightIcons[i.plant.light]),o(),m("src",i.waterIcons[i.plant.watering]),o(),H(i.icons),o(6),C(" ",i.plant.type," "),o(),h(i.plant.fertilization.enabled?20:-1),o(),h(i.plant.pruning.enabled?21:-1),o(),h(i.plant.fruit.enabled?22:-1),o(5),x(" ",i.plant.bloomTime.start," \u2013 ",i.plant.bloomTime.end," "),o(5),x(" ",b(33,17,i.plant.distance.start)," \u2013 ",b(34,19,i.plant.distance.end)," m "),o(7),x(" ",b(40,21,i.plant.height.start)," \u2013 ",b(41,23,i.plant.height.end)," m "),o(8),C(" ",i.plant.notice," "),o(),m("isOpen",i.isImageModalOpen))},dependencies:[G,J,M,$,Q,E,j,se],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{border:1px solid black;border-radius:8px;-webkit-box-shadow:3px 5px 15px 2px rgba(0,0,0,.6);box-shadow:3px 5px 15px 2px #0009}.icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;padding:8px;border-radius:8px}.icon[_ngcontent-%COMP%]{height:35px;width:35px}.modal-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:#000}.close-icon[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;font-size:32px;color:#fff;background-color:#00000080;border-radius:50%;padding:4px;cursor:pointer;z-index:10}.notice-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.notice-container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{height:100px}']});let e=a;return e})();function Ce(e,a){if(e&1&&(t(0,"div",7)(1,"ion-text",9),r(2),n()()),e&2){let l=p();o(2),C(" ",l.errorMsg," ")}}function ve(e,a){e&1&&(t(0,"div",7),g(1,"ion-spinner"),n())}function be(e,a){if(e&1&&(t(0,"div",8),g(1,"app-plant-details",10),n()),e&2){let l=p();o(),m("plant",l.plant)}}var Je=(()=>{let a=class a{constructor(){this.route=d(U),this.plantStorageService=d(te),this.plantFormService=d(w),this.router=d(A),this.actionSheetCtrl=d(L),this.alertCtrl=d(L),this.isLoading=!0,this.errorMsg="",this.plant=void 0}ngOnInit(){this.plantId=Number(this.route.snapshot.paramMap.get("id"))}ionViewWillEnter(){this.fetchPlantData(this.plantId)}fetchPlantData(c){return _(this,null,function*(){this.isLoading=!0,this.errorMsg="";try{if(this.plant=yield this.plantStorageService.getPlant(c),!this.plant){this.errorMsg="Plant not found";return}}catch(s){console.error("Failed to fetch related data:",s),this.errorMsg="Failed to fetch related data"}finally{this.isLoading=!1}})}goToAddPlant(){this.plantFormService.setPlant(this.plant),this.router.navigate(["/add-plant"],{queryParams:{editId:this.plantId}})}goToHome(){this.router.navigate(["/home"])}openDialog(){return _(this,null,function*(){yield(yield this.alertCtrl.create({header:"M\xF6chtest du diese Pflanze wirklich l\xF6schen?",buttons:[{text:"Abbrechen",role:"cancel",cssClass:"secondary"},{text:"L\xF6schen",role:"destructive",handler:()=>this.deletePlant()}]})).present()})}deletePlant(){this.plantStorageService.removePlant(this.plantId),this.goToHome()}openMenu(){return _(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:"Optionen",buttons:[{text:"Bearbeiten",icon:"pencil-outline",handler:()=>this.goToAddPlant()},{text:"L\xF6schen",icon:"trash-outline",handler:()=>this.openDialog()}]})).present()})}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=P({type:a,selectors:[["app-plant"]],decls:12,vars:3,consts:[[3,"translucent"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back-outline"],["slot","end"],["name","ellipsis-vertical"],[3,"fullscreen"],[1,"container"],[1,"plant-container"],["color","danger"],[3,"plant"]],template:function(s,i){s&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),f("click",function(){return i.goToHome()}),g(4,"ion-icon",3),n()(),t(5,"ion-buttons",4)(6,"ion-button",2),f("click",function(){return i.openMenu()}),g(7,"ion-icon",5),n()()()(),t(8,"ion-content",6),u(9,Ce,3,1,"div",7)(10,ve,2,0,"div",7)(11,be,2,1,"div",8),n()),s&2&&(m("translucent",!0),o(8),m("fullscreen",!0),o(),h(i.errorMsg?9:i.isLoading?10:11))},dependencies:[K,W,Y,E,V,M,N,me,X,Z,q],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.plant-container[_ngcontent-%COMP%]{background-color:#bec9b5;padding:16px;height:100%}"]});let e=a;return e})();export{Je as PlantPage};
